; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; XFAIL: *
; RUN: llc < %s -mtriple=amdgcn -mcpu=gfx1100 -verify-machineinstrs | FileCheck %s -check-prefixes=GCN

define amdgpu_ps i32 @s_copysign_f32_bf16(float inreg %mag, bfloat inreg %sign.bf16) {
  %sign = fpext bfloat %sign.bf16 to float
  %op = call float @llvm.copysign.f32(float %mag, float %sign)
  %cast = bitcast float %op to i32
  ret i32 %cast
}

; define i32 @s_copysign_f32_bf16(float %mag, bfloat %sign.bf16) {
;   %sign = fpext bfloat %sign.bf16 to float
;   %op = call float @llvm.copysign.f32(float %mag, float %sign)
;   %cast = bitcast float %op to i32
;   ret i32 %cast
; }

; define i32 @s_copysign_f32_bf16(float inreg %mag, bfloat inreg %sign.bf16) {
;   %sign = fpext bfloat %sign.bf16 to float
;   %op = call float @llvm.copysign.f32(float %mag, float %sign)
;   %cast = bitcast float %op to i32
;   %readlane = call i32 @llvm.amdgcn.readfirstlane(i32 %cast)
;   ret i32 %readlane
; }